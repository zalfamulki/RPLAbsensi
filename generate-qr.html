<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generate QR Code - UnivSync Attend</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
</head>
<body>
    <div class="dashboard-container">
        <!-- Header -->
        <header class="scan-header">
            <button class="back-btn" onclick="history.back()">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white">
                    <path d="M19 12H5M12 19l-7-7 7-7"/>
                </svg>
            </button>
            <h1>Generate QR Code</h1>
        </header>

        <!-- Main Content -->
        <main class="scan-main">
            <div class="generate-info">
                <h2>QR Code Absensi Kelas</h2>
                <p>Generate QR Code untuk memulai sesi absensi</p>
            </div>

            <!-- Course Selection -->
            <div class="course-selection-enhanced">
                <label for="courseSelect">
                    <svg width="20" height="20" viewBox="0 0 20 20" style="vertical-align: middle; margin-right: 8px;">
                        <rect x="3" y="3" width="14" height="14" rx="2" fill="none" stroke="currentColor" stroke-width="1.5"/>
                        <path d="M7 7h6M7 10h6M7 13h4" stroke="currentColor" stroke-width="1.5"/>
                    </svg>
                    Pilih Mata Kuliah
                </label>
                <select id="courseSelect" class="course-select-enhanced">
                    <option value="">-- Pilih Mata Kuliah --</option>
                    <option value="PBO">Pemrograman Berorientasi Objek - TI 3A</option>
                    <option value="BASDAT">Basis Data Lanjut - TI 5A</option>
                    <option value="JARKOM">Jaringan Komputer - TI 4B</option>
                    <option value="RPL">Rekayasa Perangkat Lunak - TI 6A</option>
                    <option value="SISDIG">Sistem Digital - TI 2A</option>
                </select>
            </div>

            <!-- Session Settings -->
            <div class="session-settings">
                <div class="setting-item">
                    <label for="duration">
                        <svg width="20" height="20" viewBox="0 0 20 20" style="vertical-align: middle; margin-right: 8px;">
                            <circle cx="10" cy="10" r="8" fill="none" stroke="currentColor" stroke-width="1.5"/>
                            <path d="M10 6v4l3 3" stroke="currentColor" stroke-width="1.5"/>
                        </svg>
                        Durasi Aktif QR (menit)
                    </label>
                    <input type="number" id="duration" value="15" min="5" max="60" class="duration-input">
                </div>
                
                <div class="setting-item">
                    <label for="room">
                        <svg width="20" height="20" viewBox="0 0 20 20" style="vertical-align: middle; margin-right: 8px;">
                            <rect x="3" y="4" width="14" height="12" rx="1" fill="none" stroke="currentColor" stroke-width="1.5"/>
                            <path d="M7 8h6M7 12h4" stroke="currentColor" stroke-width="1.5"/>
                        </svg>
                        Ruangan
                    </label>
                    <input type="text" id="room" placeholder="Contoh: Lab 201" class="room-input">
                </div>
            </div>

            <!-- Generate Button -->
            <button class="btn-generate" id="generateBtn">
                <svg width="24" height="24" viewBox="0 0 24 24">
                    <rect x="3" y="3" width="7" height="7" fill="white"/>
                    <rect x="14" y="3" width="7" height="7" fill="white"/>
                    <rect x="14" y="14" width="7" height="7" fill="white"/>
                    <rect x="3" y="14" width="7" height="7" fill="white"/>
                </svg>
                <span>Generate QR Code</span>
            </button>

            <!-- QR Code Display Area -->
            <div class="qr-display-area" id="qrDisplayArea" style="display: none;">
                <div class="qr-container">
                    <div class="qr-header-info">
                        <h3 id="qrCourseName"></h3>
                        <p id="qrCourseDetails"></p>
                    </div>
                    
                    <div class="qr-code-wrapper">
                        <div class="qr-code-glow"></div>
                        <div id="qrcode" class="qr-code-box"></div>
                    </div>
                    
                    <div class="qr-timer">
                        <div class="timer-label">Waktu Tersisa</div>
                        <div class="timer-display" id="timerDisplay">
                            <svg width="20" height="20" viewBox="0 0 20 20" style="vertical-align: middle; margin-right: 8px;">
                                <circle cx="10" cy="10" r="8" fill="none" stroke="currentColor" stroke-width="2"/>
                                <path d="M10 6v4l3 3" stroke="currentColor" stroke-width="2"/>
                            </svg>
                            <span id="timer">15:00</span>
                        </div>
                        <div class="timer-progress">
                            <div class="timer-progress-bar" id="progressBar"></div>
                        </div>
                    </div>
                    
                    <div class="qr-actions">
                        <button class="btn-secondary" id="refreshBtn">
                            <svg width="20" height="20" viewBox="0 0 20 20">
                                <path d="M2 10h3M15 10h3M4 4l1.5 1.5M14.5 5.5L16 4M5.5 14.5L4 16M16 16l-1.5-1.5" stroke="currentColor" fill="none" stroke-width="2"/>
                                <path d="M10 2a8 8 0 0 1 8 8" stroke="currentColor" fill="none" stroke-width="2"/>
                                <path d="M10 18a8 8 0 0 1-8-8" stroke="currentColor" fill="none" stroke-width="2"/>
                            </svg>
                            Refresh
                        </button>
                        
                        <button class="btn-primary" id="stopBtn">
                            <svg width="20" height="20" viewBox="0 0 20 20">
                                <rect x="5" y="5" width="10" height="10" fill="white"/>
                            </svg>
                            Stop Sesi
                        </button>
                    </div>
                    
                    <div class="attendance-realtime">
                        <h4>
                            <svg width="18" height="18" viewBox="0 0 18 18" style="vertical-align: middle; margin-right: 5px;">
                                <circle cx="9" cy="6" r="3" fill="currentColor"/>
                                <path d="M3 15c0-3.3 2.7-6 6-6s6 2.7 6 6" fill="currentColor"/>
                            </svg>
                            Mahasiswa yang Hadir
                        </h4>
                        <div class="attendance-count">
                            <span class="count-number" id="attendanceCount">0</span>
                            <span class="count-total">/ 35</span>
                        </div>
                        <div class="student-list" id="studentList">
                            <!-- Will be populated by JavaScript -->
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Bottom Navigation -->
        <nav class="bottom-nav">
            <a href="dashboard-dosen.html" class="nav-item">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                </svg>
                <span>Home</span>
            </a>
            <a href="generate-qr.html" class="nav-item active">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                    <rect x="3" y="3" width="7" height="7"></rect>
                    <rect x="14" y="3" width="7" height="7"></rect>
                    <rect x="14" y="14" width="7" height="7"></rect>
                    <rect x="3" y="14" width="7" height="7"></rect>
                </svg>
                <span>Generate QR</span>
            </a>
            <a href="riwayat-kelas.html" class="nav-item">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <path d="M12 20h9"></path>
                    <path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"></path>
                </svg>
                <span>Riwayat</span>
            </a>
            <a href="profil-dosen.html" class="nav-item">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                    <circle cx="12" cy="7" r="4"></circle>
                </svg>
                <span>Profil</span>
            </a>
        </nav>
    </div>

    <script src="script.js"></script>
</body>
</html>